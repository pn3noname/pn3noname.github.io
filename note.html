<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <title>pn3noname | Note</title>
    <link rel="icon" type="image/svg+xml" href="Blog_favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Code+Pro:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --bg-primary: #f4f2ef;
            --bg-secondary: #e8e4dd;
            --bg-card: #fafaf8;
            --text-primary: #3a3a3a;
            --text-secondary: #6f6f6f;
            --accent: #8b6f5c;
            --accent-light: #a18976;
            --border: #d5cfc5;
            --shadow: rgba(139, 111, 92, 0.08);
            --success: #059669;
            --success-light: #10b981;
            --blue: #68a0c8;
            --blue-light: #84b3d4;
            --orange: #c9885b;
            --orange-light: #d49a6a;
            --purple: #b56576;
            --purple-light: #c67d8d;
            --code-bg: #1e1e2e;
            --code-text: #cdd6f4;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            letter-spacing: -0.01em;
        }

        /* ══ HEADER ══ */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        header nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
            z-index: 101;
        }

        .logo img {
            height: 50px;
            vertical-align: middle;
        }

        .mobile-menu-btn {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 5px;
            z-index: 101;
        }

        .mobile-menu-btn span {
            width: 25px;
            height: 3px;
            background-color: var(--text-primary);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .mobile-menu-btn.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .mobile-menu-btn.active span:nth-child(2) {
            opacity: 0;
        }

        .mobile-menu-btn.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2.5rem;
        }

        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: color 0.2s;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--purple), var(--blue));
            transition: width 0.3s;
        }

        .nav-links a:hover {
            background: linear-gradient(90deg, var(--purple), var(--blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-links a:hover::after,
        .nav-links a.active::after { width: 100%; }

        /* ══ MAIN WRAPPER ══ */
        .page-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 6rem 2rem;
        }

        /* ══ TOP BAR - ABSOLUTE POSITIONING ══ */
        .top-bar {
            position: relative;
            height: 2rem;
            margin: 3rem 0 2rem 0;
        }

        .breadcrumb {
            position: absolute;
            left: 0;
            top: 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
        }

        .breadcrumb a:hover { color: var(--blue); }

        .breadcrumb svg {
            width: 10px;
            height: 10px;
            opacity: 0.4;
        }

        .breadcrumb .current {
            color: var(--text-primary);
            font-weight: 500;
        }

        .back-link {
            position: absolute;
            right: 0;
            top: 0;
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.2rem 0.6rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .back-link:hover {
            color: var(--blue);
            background-color: rgba(104, 160, 200, 0.07);
        }

        .back-link svg {
            width: 14px;
            height: 14px;
        }

        /* ══ CONTENT GRID ══ */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 220px;
            gap: 4rem;
            align-items: start;
        }

        /* ══ ARTICLE ══ */
        .article-category {
            display: inline-block;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--blue);
            background-color: rgba(104, 160, 200, 0.12);
            padding: 0.35rem 0.8rem;
            border-radius: 20px;
            margin-bottom: 1rem;
        }

        .article-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.8rem;
            line-height: 1.2;
        }

        .article-date {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-family: 'Source Code Pro', monospace;
            display: block;
            margin-bottom: 1rem;
        }

        .article-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }

        .article-tag {
            font-size: 0.75rem;
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            padding: 0.3rem 0.7rem;
            border-radius: 15px;
            font-family: 'Source Code Pro', monospace;
        }

        .article-body {
            font-size: 1.05rem;
            line-height: 1.8;
            color: var(--text-primary);
        }

        .article-body h2 {
            font-size: 1.8rem;
            margin: 2.5rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border);
        }

        .article-body h3 {
            font-size: 1.4rem;
            margin: 2rem 0 0.8rem 0;
        }

        .article-body p {
            margin-bottom: 1.2rem;
        }

        .article-body ul,
        .article-body ol {
            margin: 1rem 0 1.4rem;
            padding-left: 1.6rem;
        }

        .article-body li {
            margin-bottom: 0.5rem;
        }

        .article-body code {
            background-color: rgba(30, 30, 46, 0.08);
            color: var(--purple);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-family: 'Source Code Pro', monospace;
            font-size: 0.9em;
        }

        .article-body pre {
            background-color: var(--code-bg);
            border-radius: 10px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 1.8rem 0;
        }

        .article-body pre code {
            background: none;
            color: var(--code-text);
            padding: 0;
            font-size: 0.875rem;
        }

        /* ══ TOC SIDEBAR ══ */
        .toc-sidebar {
            position: sticky;
            top: 100px;
        }

        .toc-card {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px var(--shadow);
        }

        .toc-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1.5px solid var(--border);
        }

        .toc-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.1rem;
        }

        .toc-item a {
            display: block;
            font-size: 0.82rem;
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.3rem 0.5rem;
            border-radius: 5px;
            line-height: 1.5;
            transition: all 0.2s;
            border-left: 2px solid transparent;
        }

        .toc-item a:hover,
        .toc-item a.active {
            color: var(--blue);
            background-color: rgba(104, 160, 200, 0.07);
            border-left-color: var(--blue);
        }

        .toc-item.h3 a { padding-left: 1.2rem; font-size: 0.78rem; }
        .toc-item.h4 a { padding-left: 2rem; font-size: 0.75rem; }

        /* ══ FOOTER ══ */
        footer {
            background-color: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 2.5rem 2rem;
            text-align: center;
            color: var(--text-secondary);
            margin-top: 5rem;
        }

        footer .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1.2rem;
        }

        footer .logo-container img { height: 32px; }

        footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }

        footer p { font-size: 0.95rem; }
        footer a:hover { color: var(--accent-light); }

        /* ══ RESPONSIVE ══ */
        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            .toc-sidebar { display: none; }
            .back-link { display: none; }
        }

        @media (max-width: 768px) {
            .article-title { font-size: 2rem; }
            .page-container { padding: 0 1rem 4rem 1rem; }
            
            header nav {
                padding: 1rem;
            }

            .mobile-menu-btn {
                display: flex;
            }

            .nav-links {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--bg-card);
                flex-direction: column;
                gap: 0;
                padding: 0;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.3s ease;
                border-bottom: 1px solid var(--border);
                box-shadow: 0 4px 6px var(--shadow);
            }

            .nav-links.active {
                max-height: 400px;
            }

            .nav-links li {
                border-bottom: 1px solid var(--border);
            }

            .nav-links li:last-child {
                border-bottom: none;
            }

            .nav-links a {
                display: block;
                padding: 1rem 2rem;
                font-size: 1rem;
            }

            .nav-links a::after {
                display: none;
            }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <nav>
            <a href="index.html" class="logo">
                <img src="Blog_logo.svg" alt="pn3noname">
            </a>
            <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links" id="navLinks">
                <li><a href="notes.html" class="active">Learning Notes</a></li>
                <li><a href="index.html#tags">Tags</a></li>
                <li><a href="index.html#resources">Resources</a></li>
                <li><a href="index.html#writeups">Writeups</a></li>
                <li><a href="about.html">About</a></li>
            </ul>
        </nav>
    </header>

    <div class="page-container">
        
        <!-- Top Bar with Absolute Positioning -->
        <div class="top-bar">
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <a href="index.html">Home</a>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                <a href="notes.html">Learning Notes</a>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"/></svg>
                <span class="current" id="breadcrumbTitle">Loading...</span>
            </nav>
            <a href="notes.html" class="back-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"/></svg>
                Back to Notes
            </a>
        </div>

        <!-- Content Grid -->
        <div class="content-grid">
            <article>
                <div class="article-category" id="articleCategory">—</div>
                <h1 class="article-title" id="articleTitle">Loading note...</h1>
                <span class="article-date" id="articleDate">—</span>
                <div class="article-tags" id="articleTags"></div>
                <div class="article-body" id="articleBody"><!-- Content injected by JS --></div>
            </article>

            <aside class="toc-sidebar">
                <div class="toc-card">
                    <div class="toc-title">On this page</div>
                    <ul class="toc-list" id="tocList"></ul>
                </div>
            </aside>
        </div>

    </div>

    <footer>
        <div class="logo-container">
            <img src="Blog_logo.svg" alt="pn3noname">
        </div>
        <p style="display: flex; align-items: center; justify-content: center; gap: 0.8rem;">
            <span>© 2026 pn3noname</span>
            <span style="color: var(--border);">|</span>
            <a href="https://github.com/pn3noname" target="_blank" rel="noopener noreferrer">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="vertical-align:middle;margin-right:4px;">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                GitHub
            </a>
            <span style="color: var(--border);">|</span>
            <span>MIT License</span>
        </p>
    </footer>

    <script src="notes-data.js"></script>
    <script>
    // Mobile menu toggle
    (function() {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navLinks = document.getElementById('navLinks');

        if (mobileMenuBtn && navLinks) {
            mobileMenuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                const isActive = navLinks.classList.toggle('active');
                mobileMenuBtn.classList.toggle('active');
                mobileMenuBtn.setAttribute('aria-expanded', isActive);
            });

            document.addEventListener('click', function(e) {
                if (!navLinks.contains(e.target) && e.target !== mobileMenuBtn) {
                    navLinks.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                }
            });

            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    navLinks.classList.remove('active');
                    mobileMenuBtn.classList.remove('active');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                }
            });
        }
    })();

    // Note rendering
    (function() {
        'use strict';

        if (typeof notesData === 'undefined') {
            console.error('notes-data.js not loaded');
            return;
        }

        function getSlug() {
            const params = new URLSearchParams(window.location.search);
            return params.get('slug');
        }

        function parseMarkdown(md) {
            let html = md;
            
            html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, function(match, lang, code) {
                return '<pre' + (lang ? ' data-lang="' + lang + '"' : '') + '><code>' + 
                       code.replace(/</g, '&lt;').replace(/>/g, '&gt;') + '</code></pre>';
            });
            
            html = html.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            html = html.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            
            html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
            html = html.replace(/`([^`]+)`/g, '<code>$1</code>');
            
            html = html.replace(/^\* (.+)$/gim, '<li>$1</li>');
            html = html.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            
            html = html.split('\n\n').map(p => {
                if (!p.match(/^<(h|ul|pre)/)) return '<p>' + p + '</p>';
                return p;
            }).join('\n');
            
            return html;
        }

        function buildTOC(content) {
            const tocList = document.getElementById('tocList');
            const headers = content.match(/<h([234])>(.*?)<\/h\1>/g);
            
            if (!headers) return;
            
            headers.forEach((header, idx) => {
                const level = header.match(/<h([234])>/)[1];
                const text = header.replace(/<[^>]+>/g, '');
                const id = 'heading-' + idx;
                
                const targetHeader = content.split(header)[0].length;
                document.getElementById('articleBody').innerHTML = 
                    document.getElementById('articleBody').innerHTML.replace(
                        header, 
                        header.replace('>', ' id="' + id + '">')
                    );
                
                const li = document.createElement('li');
                li.className = 'toc-item h' + level;
                li.innerHTML = '<a href="#' + id + '">' + text + '</a>';
                tocList.appendChild(li);
            });
        }

        function renderNote() {
            const slug = getSlug();
            if (!slug) {
                document.getElementById('articleTitle').textContent = 'No note specified';
                return;
            }

            const note = notesData.find(n => n.slug === slug);
            if (!note) {
                document.getElementById('articleTitle').textContent = 'Note not found';
                document.getElementById('breadcrumbTitle').textContent = slug;
                return;
            }

            document.title = 'pn3noname | ' + note.title;
            document.getElementById('breadcrumbTitle').textContent = note.title;
            document.getElementById('articleCategory').textContent = note.category || '';
            document.getElementById('articleTitle').textContent = note.title;
            document.getElementById('articleDate').textContent = note.date || '';
            
            const tagsDiv = document.getElementById('articleTags');
            (note.tags || []).forEach(tag => {
                const span = document.createElement('span');
                span.className = 'article-tag';
                span.textContent = tag;
                tagsDiv.appendChild(span);
            });

            const bodyDiv = document.getElementById('articleBody');
            bodyDiv.innerHTML = parseMarkdown(note.content || '');
            buildTOC(bodyDiv.innerHTML);
        }

        renderNote();
    })();
    </script>

</body>
</html>
